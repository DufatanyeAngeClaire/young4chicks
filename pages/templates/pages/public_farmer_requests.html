{% extends 'pages/base_public.html' %}

{% block content %}
<div class="container py-4">
 <h2 class="mb-4 text-center">Welcome To Young4Chicks</h2>
  <h2 class="mb-4 text-center" style="color: #2ca02c;">Chick Requests Status</h2>

  <!-- Search form -->
  <form method="get" class="mb-5 d-flex justify-content-center">
    <input 
      type="text" 
      name="q" 
      value="{{ search_query }}" 
      placeholder="Search by Farmer Name" 
      class="form-control w-50 me-2 border-success"
      style="box-shadow: 0 0 6px #2ca02c;"
    />
    <button type="submit" class="btn btn-success px-4 fw-semibold">Search</button>
  </form>

  <!-- Pending Requests Card -->
  <div class="card mb-4 shadow-sm border-3 border-dark">
    <div class="card-header bg-light text-dark">
      <h5 class="mb-0">Pending Requests</h5>
    </div>
    <div class="card-body p-0">
      <table class="table table-hover mb-0">
        <thead class="table-secondary">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Farmer Name</th>
            <th scope="col">Chicks Qty</th>
            <th scope="col">Chick Type</th>
            <th scope="col">Requested On</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for req in pending_requests %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ req.farmer_name }}</td>
            <td>{{ req.chick_quantity }}</td>
            <td>{{ req.chick_type }}</td>
            <td>{{ req.chick_date|date:"M d, Y" }}</td>
            <td><span class="badge bg-light text-dark">{{ req.chick_status|title }}</span></td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center py-3 fst-italic text-muted">No pending requests found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Approved Requests Card -->
  <div class="card mb-4 shadow-sm border-3 border-success">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0">Approved Requests</h5>
    </div>
    <div class="card-body p-0">
      <table class="table table-hover mb-0">
        <thead class="table-success">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Farmer Name</th>
            <th scope="col">Chicks Qty</th>
            <th scope="col">Chick Type</th>
            <th scope="col">Requested On</th>
            <th scope="col">Status</th>
          </tr>
        </thead>
        <tbody>
          {% for req in approved_requests %}
          <tr>
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ req.farmer_name }}</td>
            <td>{{ req.chick_quantity }}</td>
            <td>{{ req.chick_type }}</td>
            <td>{{ req.chick_date|date:"M d, Y" }}</td>
            <td><span class="badge bg-success">{{ req.chick_status|title }}</span></td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="6" class="text-center py-3 fst-italic text-muted">No approved requests found.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

</div>
{% endblock %}

