{% extends 'pages/base.html' %}
{% load humanize %}

{% block content %}
<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-black">Feed Stock Inventory</h2>
    <a href="{% url 'add_feed_stock' %}" 
       class="btn shadow-sm" 
       style="background-color: #28a745; color: white;">
      Add New Feed Stock
    </a>
  </div>

  {% if feedstocks %}
  <div class="table-responsive shadow-sm rounded">
    <table class="table table-bordered table-hover align-middle" 
           style="border-color: black;">
      <thead style="background-color: #28a745; color: white;">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Feed Name</th>
          <th scope="col">Quantity</th>
          <th scope="col">Feed Type</th>
          <th scope="col">Brand</th>
          <th scope="col">Chick Type</th>
          <th scope="col">Selling Price (UGX)</th>
          <th scope="col">Date Added</th>
          <th scope="col">Supplier</th>
          <th scope="col" style="width: 150px;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for feed in feedstocks %}
        <tr style="color: black;">
          <th scope="row">{{ forloop.counter }}</th>
          <td>{{ feed.feed_name }}</td>
          <td>{{ feed.feed_quantity }}</td>
          <td>{{ feed.feed_type }}</td>
          <td>{{ feed.feed_brand }}</td>
          <td>
            {% if feed.chick_type %}
              {{ feed.chick_type.name }}
            {% else %}
              <span class="fst-italic text-muted">N/A</span>
            {% endif %}
          </td>
          <td>{{ feed.selling_price|intcomma }}</td>
          <td>{{ feed.date_added|date:"M d, Y" }}</td>
          <td>{{ feed.feed_supplier }}</td>
          <td>
            <!-- Edit Button -->
            <a href="{% url 'edit_feed_stock' feed.id %}" 
               class="btn btn-sm me-1" 
               style="background-color: black; color: white;"
               title="Edit">
               Edit
            </a>
            <!-- Delete Button -->
            <a href="{% url 'delete_feed_stock' feed.id %}" 
               class="btn btn-sm" 
               style="background-color: #dc3545; color: white;"
               title="Delete"
               onclick="return confirm('Are you sure you want to delete this feed stock?');">
               Delete
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
    <div class="alert" 
         style="background-color: #28a745; color: white; text-align: center; font-size: 1.2rem;">
      No feed stock records found. Click <a href="{% url 'add_feed_stock' %}" style="color: white; text-decoration: underline;">here</a> to add one.
    </div>
  {% endif %}
</div>
{% endblock %}
